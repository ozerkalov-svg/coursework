{"version":3,"file":"index.js","sources":["../src/js/exercises.js","../src/js/footer.js"],"sourcesContent":["import handlerStartBtn from './exercises_card.js';\r\nimport { displayQuote } from './localalStorageLogical.js';\r\nimport {\r\n  fetchFilterss,\r\n  fetchExercisesAPI,\r\n  page,\r\n  currentFilter,\r\n  localResponse,\r\n  setFilter,\r\n  setName,\r\n  setCurrentFilter,\r\n  setPage,\r\n  filter,\r\n  setKeyword, \r\n} from './api.js';\r\n\r\nconst refs = {\r\n  filters: document.querySelector('.filters'),\r\n  navButtons: document.querySelector('.nav-buttons'),\r\n  musclesBtn: document.querySelector('.muscles-btn'),\r\n  exercisesTitle: document.querySelector('.exercises-title'),\r\n  searchForm: document.querySelector('.search-form'),\r\n  searchInput: document.querySelector('.search-form input'),\r\n  loadMoreBtn: document.querySelector('.load-more-btn'),\r\n  quoteContainer: document.querySelector('.quote'),\r\n  pagination: document.querySelector('.pagination'),\r\n  exercises: document.querySelector('.exercises'),\r\n};\r\n\r\ndisplayQuote(refs.quoteContainer);\r\nfetchFilters();\r\nrefs.musclesBtn.classList.add('active-btn');\r\n\r\nrefs.filters.addEventListener('click', pressFilterBtn);\r\nrefs.exercises.addEventListener('click', loadExercises);\r\nrefs.searchForm.addEventListener('submit', onSearchSubmit);\r\n\r\nrefs.loadMoreBtn?.addEventListener('click', loadMore);\r\nrefs.pagination?.addEventListener('click', onPaginationClick);\r\nrefs.exercises.addEventListener('click', onStartClick);\r\n\r\nasync function fetchFilters(reset = true) {\r\n  if (reset) refs.exercises.innerHTML = '';\r\n\r\n  const data = await fetchFilterss(reset);\r\n  if (!data.results.length) return showNoResults();\r\n\r\n  makeFilterCards(data.results);\r\n  renderPagination(data.totalPages);\r\n}\r\n\r\nfunction makeFilterCards(items) {\r\n  const markup = items\r\n    .map(\r\n      ({ name, filter, imgURL }) => `\r\n      <li class=\"exercise\">\r\n        <img src=\"${imgURL}\" alt=\"${name}\" loading=\"lazy\" class=\"exercise-image\" />\r\n        <div class=\"exercise-info\">\r\n          <h2 class=\"exercise-subtitle\">${capitalize(name)}</h2>\r\n          <p class=\"exercise-filter\">${filter}</p>\r\n        </div>\r\n      </li>\r\n    `\r\n    )\r\n    .join('');\r\n\r\n  refs.exercises.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction pressFilterBtn(event) {\r\n  if (event.target.tagName !== 'BUTTON') return;\r\n\r\n  document.querySelector('.active-btn')?.classList.remove('active-btn');\r\n  event.target.classList.add('active-btn');\r\n\r\n  if (event.target.classList.contains('muscles-btn'))\r\n    setCurrentFilter('Muscles');\r\n  if (event.target.classList.contains('bodyparts-btn'))\r\n    setCurrentFilter('Body parts');\r\n  if (event.target.classList.contains('equipment-btn'))\r\n    setCurrentFilter('Equipment');\r\n\r\n  refs.exercisesTitle.textContent = 'Exercises';\r\n  refs.searchForm.style.display = 'none';\r\n  setKeyword('');\r\n  setPage(1);\r\n\r\n  fetchFilters(true);\r\n}\r\n\r\nasync function loadExercises(event) {\r\n  const card = event.target.closest('.exercise');\r\n  if (!card) return;\r\n\r\n  const filterEl = card.querySelector('.exercise-filter');\r\n  const nameEl = card.querySelector('.exercise-subtitle');\r\n  if (!filterEl || !nameEl) return;\r\n\r\n  setFilter(filterEl.textContent);\r\n  setName(nameEl.textContent.toLowerCase());\r\n  setKeyword('');\r\n\r\n  refs.exercisesTitle.innerHTML = `Exercises / <span>${capitalize(\r\n    nameEl.textContent\r\n  )}</span>`;\r\n\r\n  refs.searchForm.style.display = 'block';\r\n  refs.searchInput.value = '';\r\n  setPage(1);\r\n  refs.exercises.innerHTML = '';\r\n\r\n  await fetchExercises(true);\r\n}\r\n\r\nasync function fetchExercises(reset = true) {\r\n  if (reset) localResponse.length = 0;\r\n\r\n  const data = await fetchExercisesAPI(reset);\r\n  if (!data.results.length) return showNoResults();\r\n\r\n  localResponse.length = 0;\r\n  localResponse.push(...data.results);\r\n\r\n  makeExercisesCards(data.results);\r\n  renderPagination(data.totalPages);\r\n}\r\n\r\nfunction makeExercisesCards(items) {\r\n  const markup = `\r\n    <ul class=\"exercises-cards\">\r\n      ${items\r\n        .map(\r\n          ({ name, _id, rating, burnedCalories, bodyPart, target, time }) => `\r\n        <li class=\"exercise-information\" data-id-card=\"${_id}\">\r\n          <div class=\"top-nav\">\r\n            <div>\r\n              <p class=\"tag\">Workout</p>\r\n              <span class=\"rating\">\r\n                ${rating}\r\n                <svg class=\"star-icon\" width=\"14\" height=\"14\">\r\n                  <use href=\"/coursework/symbol-defs.svg#icon-star\"></use>\r\n                </svg>\r\n              </span>\r\n            </div>\r\n            <button data-action=\"start\" data-id=\"${_id}\" class=\"details-link\">\r\n              Start\r\n              <svg class=\"arrow-icon\" width=\"16\" height=\"16\">\r\n                <use href=\"/coursework/symbol-defs.svg#icon-arrow\"></use>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div class=\"exercise-header\">\r\n            <svg class=\"icon-man\" width=\"24\" height=\"24\">\r\n              <use href=\"/coursework/symbol-defs.svg#icon-run\"></use>\r\n            </svg>\r\n            <h2 class=\"exercise-name\">${capitalize(name)}</h2>\r\n          </div>\r\n          <ul class=\"exercise-details\">\r\n            <li><span>Burned calories:</span> ${burnedCalories} / ${time} min</li>\r\n            <li><span>Body part:</span> ${capitalize(bodyPart)}</li>\r\n            <li><span>Target:</span> ${capitalize(target)}</li>\r\n          </ul>\r\n        </li>\r\n      `\r\n        )\r\n        .join('')}\r\n    </ul>\r\n  `;\r\n\r\n  refs.exercises.innerHTML = markup;\r\n}\r\n\r\nfunction onSearchSubmit(e) {\r\n  e.preventDefault();\r\n\r\n  const value = refs.searchInput.value.trim().toLowerCase();\r\n  setKeyword(value);\r\n  setPage(1);\r\n\r\n  refs.exercises.innerHTML = '';\r\n  fetchExercises(true);\r\n}\r\n\r\n\r\nfunction onPaginationClick(e) {\r\n  const btn = e.target.closest('.pagination-btn');\r\n  if (!btn) return;\r\n\r\n  const selectedPage = Number(btn.dataset.page);\r\n  if (selectedPage === page) return;\r\n\r\n  setPage(selectedPage);\r\n  refs.exercises.innerHTML = '';\r\n  filter ? fetchExercises(false) : fetchFilters(false);\r\n}\r\n\r\nfunction onStartClick(event) {\r\n  const btn = event.target.closest('[data-action=\"start\"]');\r\n  if (!btn) return;\r\n\r\n  const exercise = localResponse.find(el => el._id === btn.dataset.id);\r\n  handlerStartBtn(exercise);\r\n}\r\n\r\nfunction showNoResults() {\r\n  refs.exercises.innerHTML = `\r\n    <p class=\"no-results-paragraph\">\r\n      Unfortunately, <span>no results</span> were found.\r\n    </p>\r\n  `;\r\n  refs.loadMoreBtn?.style.setProperty('display', 'none');\r\n  refs.pagination && (refs.pagination.innerHTML = '');\r\n}\r\n\r\nfunction capitalize(str) {\r\n  if (!str) return '';\r\n  return str[0].toUpperCase() + str.slice(1);\r\n}\r\n\r\nfunction renderPagination(totalPages) {\r\n  if (!refs.pagination || totalPages <= 1) {\r\n    refs.pagination.innerHTML = '';\r\n    return;\r\n  }\r\n\r\n  let html = '';\r\n  const createBtn = p => `\r\n    <li>\r\n      <button class=\"pagination-btn ${p === page ? 'active' : ''}\" data-page=\"${p}\">\r\n        ${p}\r\n      </button>\r\n    </li>\r\n  `;\r\n\r\n  let start = Math.max(1, page - 1);\r\n  let end = Math.min(totalPages, page + 1);\r\n\r\n  if (page === 1) end = Math.min(totalPages, 3);\r\n  if (page === totalPages) start = Math.max(1, totalPages - 2);\r\n\r\n  if (start > 1) {\r\n    html += createBtn(1);\r\n    if (start > 2) html += `<li class=\"dots\">...</li>`;\r\n  }\r\n\r\n  for (let i = start; i <= end; i++) html += createBtn(i);\r\n\r\n  if (end < totalPages) {\r\n    if (end < totalPages - 1) html += `<li class=\"dots\">...</li>`;\r\n    html += createBtn(totalPages);\r\n  }\r\n\r\n  refs.pagination.innerHTML = html;\r\n}\r\n","import iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport { postSubscriptions } from './api.js'; \r\n\r\nconst email = document.querySelector('input[name=email]');\r\nconst submitBtnFooter = document.querySelector('.footer-send-button');\r\nconst STORAGE_KEY = 'feedback-form-state';\r\n\r\nfunction isValidEmail(value) {\r\n  const emailRegex = /^[\\w-]+(\\.[\\w-]+)*@([\\w-]+\\.)+[a-zA-Z]{2,7}$/;\r\n  return emailRegex.test(value);\r\n}\r\n\r\nfunction saveToLocalStorage() {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify({ email: email.value }));\r\n}\r\n\r\nfunction loadFromLocalStorage() {\r\n  const data = localStorage.getItem(STORAGE_KEY);\r\n  if (!data) return;\r\n\r\n  const { email: savedEmail } = JSON.parse(data);\r\n  email.value = savedEmail || '';\r\n  submitBtnFooter.disabled = !isValidEmail(email.value);\r\n}\r\n\r\nloadFromLocalStorage();\r\n\r\nemail.addEventListener('input', () => {\r\n  saveToLocalStorage();\r\n  submitBtnFooter.disabled = !isValidEmail(email.value);\r\n});\r\n\r\nemail.addEventListener('change', () => {\r\n  if (!isValidEmail(email.value)) {\r\n    iziToast.info({\r\n      message: 'Please enter a valid email address',\r\n    });\r\n  }\r\n});\r\n\r\nsubmitBtnFooter.addEventListener('click', async e => {\r\n  e.preventDefault();\r\n\r\n  if (!isValidEmail(email.value)) return;\r\n\r\n  try {\r\n    await postSubscriptions(email.value);\r\n\r\n    iziToast.success({\r\n      title: 'Success',\r\n      message: 'Welcome to energy.flow world!',\r\n    });\r\n\r\n    email.value = '';\r\n    submitBtnFooter.disabled = true;\r\n    localStorage.removeItem(STORAGE_KEY);\r\n  } catch (error) {\r\n    if (error.message === 'EMAIL_EXISTS') {\r\n      iziToast.warning({\r\n        message: 'Email already exists',\r\n      });\r\n    } else {\r\n      iziToast.error({\r\n        title: 'Error',\r\n        message: 'Something went wrong! Please try again later',\r\n      });\r\n    }\r\n  }\r\n});\r\n"],"names":["refs","displayQuote","fetchFilters","pressFilterBtn","loadExercises","onSearchSubmit","_a","onPaginationClick","onStartClick","reset","data","fetchFilterss","showNoResults","makeFilterCards","renderPagination","items","markup","name","filter","imgURL","capitalize","event","setCurrentFilter","setKeyword","setPage","card","filterEl","nameEl","setFilter","setName","fetchExercises","localResponse","fetchExercisesAPI","makeExercisesCards","_id","rating","burnedCalories","bodyPart","target","time","value","btn","selectedPage","page","exercise","el","handlerStartBtn","str","totalPages","html","createBtn","p","start","end","i","email","submitBtnFooter","STORAGE_KEY","isValidEmail","saveToLocalStorage","loadFromLocalStorage","savedEmail","iziToast","postSubscriptions","error"],"mappings":"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"}